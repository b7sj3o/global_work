{% extends 'base.html' %}

{% block style %}
<link rel="stylesheet" href="https://cdn.quilljs.com/1.3.6/quill.snow.css">
<link rel="stylesheet" href="{{ url_for('static', filename='CSS/vacancy-form.min.css') }}">
{% endblock %}

{% block content %}

<form method="POST" enctype="multipart/form-data" class="container mt-4 p-4 border rounded bg-light">
    {{ form.hidden_tag() }}

    <div class="mb-3">
        {{ form.title.label(class="form-label") }}
        {{ form.title(class="form-control", size=32) }}
    </div>
    <div class="mb-3">
        {{ form.title_ru.label(class="form-label") }}
        {{ form.title_ru(class="form-control", size=32) }}
    </div>

    <div class="mb-3">
        {{ form.main_image_path.label(class="form-label") }}
        {{ form.main_image_path(class="form-control", accept=".jpg,.jpeg,.png", id="mainImageInput") }}
        <div id="mainImagePreview" class="preview-container"></div>
    </div>

    <div class="mb-3">
        {{ form.images_path.label(class="form-label") }}
        {{ form.images_path(class="form-control", accept=".jpg,.jpeg,.png", multiple=True, id="additionalImagesInput") }}
        <div id="additionalImagesPreview" class="preview-container"></div>
        <small class="form-text text-muted">You can upload multiple images.</small>
    </div>

    <div class="mb-3">
        {{ form.video_path.label(class="form-label") }}
        {{ form.video_path(class="form-control", accept=".mp4,.avi,.mkv", id="videoInput") }}
        <div id="videoPreview" class="preview-container"></div>
    </div>

    <div class="mb-3">
        {{ form.salary.label(class="form-label") }}
        {{ form.salary(class="form-control", size=32) }}
    </div>
    <div class="mb-3">
        {{ form.salary_ru.label(class="form-label") }}
        {{ form.salary_ru(class="form-control", size=32) }}
    </div>

    <div class="mb-3">
        {{ form.schedule.label(class="form-label") }}
        {{ form.schedule(class="form-control", size=32) }}
    </div>
    <div class="mb-3">
        {{ form.schedule_ru.label(class="form-label") }}
        {{ form.schedule_ru(class="form-control", size=32) }}
    </div>

    <div class="mb-3">
        {{ form.accommodation.label(class="form-label") }}
        {{ form.accommodation(class="form-control", size=32) }}
    </div>
    <div class="mb-3">
        {{ form.accommodation_ru.label(class="form-label") }}
        {{ form.accommodation_ru(class="form-control", size=32) }}
    </div>

    <div class="mb-3">
        {{ form.work_location.label(class="form-label") }}
        {{ form.work_location(class="form-control", size=32) }}
    </div>
    <div class="mb-3">
        {{ form.work_location_ru.label(class="form-label") }}
        {{ form.work_location_ru(class="form-control", size=32) }}
    </div>

    <div class="mb-3">
        {{ form.description.label(class="form-label") }}
        <div id="description" style="height: 200px;"></div>
        {{ form.description(class="form-control", rows=5, id="description_field", style="opacity: 0; height: 1px;") }}
    </div>

    <div class="mb-3">
        {{ form.description_ru.label(class="form-label") }}
        <div id="description_ru" style="height: 200px;"></div>
        {{ form.description_ru(class="form-control", rows=5, id="description_ru_field", style="opacity: 0; height: 1px;") }}
    </div>

    <div class="d-grid">
        {{ form.submit(class="btn btn-primary") }}
    </div>
</form>

{% endblock %}

{% block script %}
<script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
<script>
    const editors = [
        { quillId: '#description', fieldId: '#description_field' },
        { quillId: '#description_ru', fieldId: '#description_ru_field' },
    ];
    editors.forEach(editor => {
        const quill = new Quill(editor.quillId, {
            theme: 'snow',
            placeholder: 'Напишіть ваше повідомлення тут...',
            modules: {
                toolbar: [
                    [{ 'header': [1, 2, false] }],
                    ['bold', 'italic', 'underline'],
                    [{ 'list': 'ordered' }, { 'list': 'bullet' }],
                    ['link'],
                    ['clean']
                ]
            }
        });

        document.querySelector('form').addEventListener('click', function () {
            const content = document.querySelector(editor.quillId).children[0].innerHTML;
            document.querySelector(editor.fieldId).value = content;
        });
    });
</script>
<script src="{{ url_for('static', filename='JS/previewImages.js') }}"></script>
{% endblock %}